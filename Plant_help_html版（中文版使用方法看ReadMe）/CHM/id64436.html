<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<!--
This software and related documentation are proprietary to Siemens Product Lifecycle Management Software Inc.

(c) 2013 Siemens Product Lifecycle Management Software Inc. All Rights Reserved. 

All trademarks belong to their respective holders.
-->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Exception Handling</title>
      
      <meta name="MS-HKWD" content="Exception Handling">
      <meta name="MS-HKWD" content="ErrorHandler">
      
      <link type="text/css" href="css/base.css" rel="stylesheet">
   </head>
   <body class="bodydocs" bgcolor="#FFFFFF">
      <div class="title_topic4" id="xps10_pagetitle">Exception Handling</div>
      <hr noshade="true">
      <div class="insideNavLinks"><span><a class="link" href="id73016.html"><img border="0" src="../../../../../../icons/previous.gif" title="Previous Page:Exiting Methods Using Return"></a><a class="link" href="Predefined_Functions_1.html"><img border="0" src="../../../../../../icons/next.gif" title="Next Page:Predefined Functions"></a></span></div>
      <table align="center" class="simpleHTMLminitoc" width="95%">
         <tr>
            <td class="simpleHTMLminitoc"><span class="simpleHTMLminitoc"><a href="xid1484029.html">SimTalk Reference</a></span> &gt; <span class="simpleHTMLminitoc"><a href="id17964.html">General SimTalk Functions</a></span> &gt; <span class="simpleHTMLminitoc"><a href="Control_Flow_Statements_1.html">Control Flow Statements</a></span> &gt; <span class="simpleHTMLminitoc">Exception Handling</span></td>
         </tr>
      </table>
      <div class="contentType_"><span id="ndxgenid_PlantSimulationENU_13863"></span><span id="ndxgenid_PlantSimulationENU_13864"></span><p class="para_topic">Exception handling allows you to react to runtime errors, which occur in <em>Methods</em>. This makes, for example, sense, when the simulation has to continue under all circumstances and when you would like to record the errors, which occur, or when you want to take appropriate measures, when errors, which you expect to occur, in fact do occur.
         </p>
         <p class="para_topic">To implement exception handling, proceed as follows: </p>
         <ul>
            <li>
               
               <p class="para_item">For a <em>Method</em>: Create a <em>user-defined attribute</em> of data type <em>method</em> or <em>object</em> and name it <code>ErrorHandler</code>. You have to create this attribute either in the <em>Method</em> itself or in the <em>Frame</em>, into which you inserted the <em>Method</em>.
               </p>
               
            </li>
            <li>
               
               <p class="para_item">For a <em>user-defined attribute</em> of data type <em>method</em>: Create another <em>user-defined attribute</em> in the object, which has the <em> user-defined attribute(s)</em>. This attribute has to be of data type <em>method</em> or <em>object</em> and be named <code>ErrorHandler</code>.
               </p>
               
            </li>
         </ul>
         <p class="para_topic">The source code of the <em>ErrorHandler</em> could, for example, look like this:
         </p>
         <table bgcolor="#FFFFFF" border="1" cellpadding="2" cellspacing="1">
            
            <colgroup span="1">
               
               <col span="1" width="100%">
               
            </colgroup>
            
            <tbody>
               
               <tr>
                  
                  <td colspan="1" rowspan="1">
                     
                     <table bgcolor="#FFFFFF" cellpadding="2" cellspacing="1" align="center">
                        
                        <tbody>
                           
                           <tr valign="top">
                              
                              <td colspan="1" rowspan="1" width="85">
                                 
                                 <p class="para_td_last"><b class="uiTerm">Example:</b></p>
                                 
                              </td>
                              
                              <td colspan="1" rowspan="1" width="500">
                                 <pre class="indent">param byref error: string,
      method_path: string,
      line_number: integer -&gt; any 
if error = &quot;Division by zero.&quot; 
   error := &quot;&quot;  -- catch this error
   return 1e300 -- return a value to the calling method
end
-- route error message to the calling method 
error := &quot;error in &quot; + method_path + &quot;: &quot; + error</pre>
                                 </td>
                              
                           </tr>
                           
                        </tbody>
                        
                     </table>
                     
                  </td>
                  
               </tr>
               
            </tbody>
            
         </table>
         <p class="para_topic">When a runtime error occurs in a <em>Method</em>, <em>Plant Simulation</em> cancels executing that <em>Method</em> and calls the exception handling method (<em>ErrorHandler</em>) of the <em>Method</em>. If the <em>Method</em> does not have an <em>ErrorHandler</em>, <em>Plant Simulation</em> searches for an <em>ErrorHandler</em> within the call chain. When none of the <em>Methods</em> within the call chain have an <em>ErrorHandler</em>, <em>Plant Simulation</em> uses the standard error handling procedure, i.e., it normally opens the <em>method debugger</em>.
         </p>
         <p class="para_topic">Three parameters are passed to the <em>ErrorHandler</em>: 
         </p>
         <ul>
            <li>
               
               <p class="para_item">The error message.</p>
               
            </li>
            <li>
               
               <p class="para_item">The path of the faulty <em>Method</em>. 
               </p>
               
            </li>
            <li>
               
               <p class="para_item">The number of the line, in which the error occurred. </p>
               
            </li>
         </ul>
         <p class="para_topic">When you assign an empty string to the error message variable, <em>Plant Simulation</em> assumes that you successfully took care of the error. Execution of the faulty <em>Method</em> will not be continued. Instead, <em>Plant Simulation</em> jumps back to that <em>Method</em>, which called the <em>Method</em>, which has the <em>ErrorHandler</em>. When the <em>Method</em>, which has the <em>ErrorHandler</em>, returns a value, the <em>ErrorHandler</em> should also do so.
         </p>
         <p class="para_topic">When you cannot react appropriately to the error because, for example, an error occurred, which you did not expect, you should not delete the error message. You can change it at will though. When you do not delete the error message, <em>Plant Simulation</em> assumes that you did not take care of the error, and passes the error message to the calling <em>Method</em>. If the call chain contains another <em>Method</em> with an <em>ErrorHandler</em>, <em>Plant Simulation</em> calls this <em>ErrorHandler</em> with the changed error message. Otherwise <em>Plant Simulation</em> uses the standard exception handling procedure with the changed error message.
         </p>
         <div class="attention attention_note">
            <table border="0">
               <tr>
                  <td valign="top" align="left"><img src="graphics/note.gif" alt="Note" title="Note"></td>
                  <td valign="bottom" align="left" width="100%">
                     
                     <p class="para_note_body">When another runtime error occurs during exception handling, <em>Plant Simulation</em> does not re-execute the exception handling <em>Method</em>.
                     </p>
                     
                  </td>
               </tr>
            </table>
         </div>
         <p class="para_topic"><b class="uiTerm">Related Topics</b></p>
         <p class="para_topic"><a class="links" href="id40501.html">setErrorHandler</a></p>
         <p class="para_topic"><a class="links" href="id36614.html">getCallStack</a></p>
      </div>
      <div class="insideNavLinks"><span><a class="link" href="id73016.html"><img border="0" src="../../../../../../icons/previous.gif" title="Previous Page:Exiting Methods Using Return"></a><a class="link" href="Predefined_Functions_1.html"><img border="0" src="../../../../../../icons/next.gif" title="Next Page:Predefined Functions"></a></span></div>
   </body>
</html>